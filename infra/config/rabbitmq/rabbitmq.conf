# RabbitMQ Production Configuration
# Security-hardened configuration replacing development defaults

# Standard AMQP port (secure)
listeners.tcp = none
listeners.ssl.default = 5671

# Management plugin HTTPS
management.listener.port = 15671
management.listener.ssl = true

# SSL/TLS CONFIGURATION  
ssl_options.cacertfile = /etc/rabbitmq/tls/ca.crt
ssl_options.certfile   = /etc/rabbitmq/tls/server.crt
ssl_options.keyfile    = /etc/rabbitmq/tls/server.key
ssl_options.verify     = verify_peer

# TLS protocol versions
ssl_options.versions.1 = tlsv1.2
ssl_options.versions.2 = tlsv1.3

# AUTHENTICATION & AUTHORIZATION
default_user = admin_user
default_permissions.configure = .*
default_permissions.write = .*
default_permissions.read = .*

# Disable guest user
loopback_users.guest = false

# PERFORMANCE & RESOURCE LIMITS
vm_memory_high_watermark.relative = 0.8
disk_free_limit.relative = 2.0
max_connections = 2000
channel_max = 2047

# LOGGING CONFIGURATION
log.console = true
log.console.level = info
log.file = /var/log/rabbitmq/rabbitmq.log
log.file.level = info

# MONITORING & METRICS
management.rates_mode = basic
prometheus.tcp.port = 15692

# MESSAGE PERSISTENCE
queue.default_durable = true